<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Event Page</title>

    <!-- Style Sheets -->
    <link rel="stylesheet" href="Styles/main-style.css" />
    <link rel="stylesheet" href="Styles/event-style.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.awesome-markers/2.0.5/leaflet.awesome-markers.css" />

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0"></script>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js" defer></script>
    <script type="module" src="scripts/script.js" defer></script>
    <script type="module" src="scripts/Event-Page/event-page-script.js" defer></script>
</head>

<body>
    <!-- Header -->
    <header class="header-container">
        <img class="statmando-logo" src="./Img/StatmandoLogo.png">
        <nav class="navbar-container">
            <ul class="navbar-content">
                <li><a href="home.html">Home</a></li>
                <li><a href="event-page.html">Event Viewer</a></li>
                <li><a href="about-us.html">About Us</a></li>
            </ul>
        </nav>
    </header>
    <!-- Header -->

    <!-- Stats Aside -->
    <aside class="stats-container">
        <h2><span id="selected-event-name">Event</span> Statistics</h2>
        <p>Overview of player metrics and reach.</p>
        <div class="stats-content">
            <div class="stat-card" id="total-players-card">
                <p class="card-title">Total Players</p>
                <p id="total-players-text" class="card-text">16 Players</p>
            </div>
            <div class="stat-card" id="average-distance-card">
                <p class="card-title">Average Distance</p>
                <p id="average-distance-text" class="card-text">1528.25 mi</p>
            </div>
            <div class="stat-card" id="over-1000-miles-card">
                <p class="card-title">&gt;1000 Miles</p>
                <p id="over-1000-miles-text" class="card-text">13 Players</p>
            </div>
            <div class="stat-card" id="under-500-miles-card">
                <p class="card-title">&lt;500 Miles</p>
                <p id="under-500-miles-text" class="card-text">10 Players</p>
            </div>
            <div class="stat-card" id="out-of-state-card">
                <p class="card-title">Out of State Players</p>
                <p id="out-of-state-text" class="card-text">13 Players</p>
            </div>
            <div class="stat-card" id="in-state-card">
                <p class="card-title">In State Players</p>
                <p id="in-state-text" class="card-text">10 Players</p>
            </div>
            <div class="stat-card" id="max-distance-card">
                <p class="card-title">Max Distance (miles)</p>
                <p id="max-distance-text" class="card-text">4320.15 mi</p>
            </div>
            <div class="stat-card" id="min-distance-card">
                <p class="card-title">Min Distance (miles)</p>
                <p id="min-distance-text" class="card-text">5.20 mi</p>
            </div>
        </div>
    </aside>
    <!-- Stats Aside -->

    <!-- Map -->
    <section class="map-container">
        <div class="map-content">
            <h2 class="map-label" id="map-event-label"></h2>
            <div id="players-map" class="mapid"></div>
        </div>
    </section>
    <!-- Map -->

    <!-- Top Players Aside -->
    <aside class="top-players-container">
        <h2>Top Players</h2>
        <p>Current Event's Top Performers</p>
        <div class="top-players-content">
            <div class="division">
                <h3>Division OPEN</h3>
                <ul>
                    <li>Jaxon Wrench - 1</li>
                    <li>Russell Harford - 2</li>
                    <li>Bob Ogden - 3</li>
                </ul>
            </div>
            <div class="division">
                <h3>Division OPEN</h3>
                <ul>
                    <li>Jaxon Wrench - 1</li>
                    <li>Russell Harford - 2</li>
                    <li>Bob Ogden - 3</li>
                </ul>
            </div>
            <div class="division">
                <h3>Division OPEN</h3>
                <ul>
                    <li>Jaxon Wrench - 1</li>
                    <li>Russell Harford - 2</li>
                    <li>Bob Ogden - 3</li>
                </ul>
            </div>
            <div class="division">
                <h3>Division OPEN</h3>
                <ul>
                    <li>Jaxon Wrench - 1</li>
                    <li>Russell Harford - 2</li>
                    <li>Bob Ogden - 3</li>
                </ul>
            </div>                                    
        </div>
    </aside>
    <!-- Top Players Aside -->

    <!-- Chart One Section -->    
    <section class="chart-one-container">
        <h3>Title</h3>
        <div class="chart-one-content">
            <canvas id="top-25-chart-id"></canvas>
        </div>
    </section>
    <!-- Chart One Seciton -->  

    <!-- Chart Two Section -->    
    <section class="chart-two-container">
        <h3>Players Attending Per State</h3>
        <div class="chart-two-content">
            <canvas id="states-chart-id"></canvas>
        </div>
    </section>
    <!-- Chart Two Seciton --> 

    <!-- FOR TESTING, REMOVE IN FINAL PRODUCT -->
    <!-- <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Set the initial view to a specific location and zoom level

        const map = L.map('players-map').setView([45.5, -98.35], 4);
        const markers = [];
        console.log(11);
        // Add a tile layer to the map (OpenStreetMap tiles)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors',
        }).addTo(map);

        const ctx = document.getElementById("top-25-chart-id").getContext("2d");
        const ctx2 = document.getElementById("states-chart-id").getContext("2d");
        const eventChart = new Chart(ctx, {
            type: "bar",
            data: {
                labels: ["Item A", "Item B", "Item C", "Item D", "Item E", "Item F"],
                datasets: [{
                    label: "Test Data",
                    data: [44, 66, 22, 250, 330, 15],
                    backgroundColor: "#42a5f5"
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            color: "white",
                            display: true,
                            text: "Test",
                            font: (ctx) => {
                                const width = ctx.chart.width;
                                return {
                                    family: "Poppins, sans-serif",
                                    size: width < 400 ? 10 : width < 800 ? 12 : 13
                                };
                            }
                        },
                        ticks: {
                            color: "white",
                            autoSkip: false,
                            maxRotation: 90,
                            minRotation: 90
                        },
                        grid: {
                            color: "rgba(255, 255, 255, 0.2)"
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            color: "white",
                            text: "Test2",
                            font: (ctx) => {
                                const width = ctx.chart.width;
                                return {
                                    family: "Poppins, sans-serif",
                                    size: width < 400 ? 10 : width < 800 ? 12 : 13
                                };
                            }
                        },
                        ticks: {
                            color: "white"
                        },
                        grid: {
                            color: "rgba(255, 255, 255, 0.2)"
                        },
                        beginAtZero: true
                    }
                }
            }
        });

        const playerChart = new Chart(ctx2, {
            type: 'pie',
            data: {
                labels: ['California', 'Texas', 'New York', 'Florida', 'Washington'],
                datasets: [{
                    label: 'Player Count',
                    data: [120, 90, 60, 80, 40], // Example counts per state
                    backgroundColor: [
                        '#FF6384', // red
                        '#36A2EB', // blue
                        '#FFCE56', // yellow
                        '#4BC0C0', // teal
                        '#9966FF'  // purple
                    ],
                    borderColor: '#fff',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top', // 'top', 'left', 'bottom' also available
                    },
                    title: {
                        display: true,
                        text: 'Player Distribution by State'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.label || '';
                                let value = context.parsed;
                                return `${label}: ${value} players`;
                            }
                        }
                    }
                }
            }
        });
    </script> -->
    <!-- FOR TESTING PURPOSES, REMOVE IN FINAL PRODUCT -->
</body>

</html>